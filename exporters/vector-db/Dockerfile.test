FROM python:3.10-slim

WORKDIR /app

# Install dependencies for test application
RUN pip install --no-cache-dir \
    chromadb==0.4.15 \
    numpy==1.24.3 \
    sentence-transformers \
    prometheus-client

# Copy test application and dependencies
COPY test_vector_operations.py /app/
COPY test_rag_application.py /app/
COPY chromadb_wrapper.py /app/
COPY vector_db_metrics_exporter.py /app/

# Create documents directory
RUN mkdir -p /app/documents

CMD ["python", "/app/test_rag_application.py"]